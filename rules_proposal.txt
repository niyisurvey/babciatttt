Generic replacement rules and codemod guidance

Color
- Rule: Replace literal Color(...) and named primitives with semantic palette tokens.
- Replacement: Color(...) or .blue -> theme.palette.<semantic>
- Detection regexes:
  - (?<!theme\.|tokens\.)Color\(
  - (?<!theme\.|tokens\.)\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)
- Codemod note: SwiftSyntax recommended to avoid matching asset names and enum cases.

SemanticColor
- Rule: Replace system semantic colors (.secondary/.tertiary/etc.) with theme tokens when consistency is required.
- Replacement: .secondary -> theme.palette.textSecondary
- Detection regex:
  - (?<!theme\.|tokens\.)\.(secondary|tertiary|primary|accentColor)
- Codemod note: Requires manual mapping in contexts where system colors are intentionally used.

Opacity
- Rule: Replace literal opacities with semantic opacity tokens.
- Replacement: .opacity(0.4) -> .opacity(theme.elevation.overlayDim)
- Detection regex:
  - \.opacity\s*\(\s*[0-9]*\.?[0-9]+\s*\)
- Codemod note: SwiftSyntax helpful to distinguish color.opacity versus view.opacity semantics.

Shadow
- Rule: Replace literal shadow colors/opacities and radii with elevation tokens.
- Replacement: .shadow(color: .black.opacity(0.2), radius: 8) -> .shadow(color: theme.elevation.shadowColor.opacity(theme.elevation.level1.opacity), radius: theme.elevation.level1.radius, y: theme.elevation.level1.y)
- Detection regex:
  - \.shadow\s*\(
- Codemod note: Needs AST + manual review to choose correct elevation level.

Spacing
- Rule: Replace numeric layout literals with grid spacing tokens.
- Replacement: padding(16) -> padding(theme.grid.m)
- Detection regexes:
  - padding\s*\(\s*\d+
  - padding\s*\(\s*\.\w+\s*,\s*\d+
  - spacing\s*:\s*\d+
  - frame\s*\([^\)]*(width|height)\s*:\s*\d+
  - offset\s*\(\s*(x|y)\s*:\s*\d+
- Codemod note: SwiftSyntax strongly recommended to avoid hitting non-UI numeric values.

Shape
- Rule: Replace literal corner radii with shape tokens.
- Replacement: RoundedRectangle(cornerRadius: 12) -> RoundedRectangle(cornerRadius: theme.shape.card)
- Detection regexes:
  - cornerRadius\s*:\s*\d+
  - RoundedRectangle\s*\(\s*cornerRadius\s*:\s*\d+
  - clipShape\s*\(\s*RoundedRectangle\s*\(\s*cornerRadius\s*:\s*\d+
- Codemod note: Map by component type; manual review required.

Typography
- Rule: Replace hardcoded font styles with semantic typography tokens.
- Replacement: .font(.title2.bold()) -> .font(theme.typography.title2)
- Detection regexes:
  - \.font\s*\(\s*\.system
  - \.font\s*\(\s*\.(title|headline|subheadline|body|caption|callout)
- Codemod note: AST tool required to preserve modifiers (weight/design).

Gradient
- Rule: Replace literal color arrays in gradients with named background gradient tokens.
- Replacement: LinearGradient(colors: [Color.red, Color.orange], ...) -> LinearGradient(colors: theme.backgrounds.gradient.sunrise, ...)
- Detection regexes:
  - LinearGradient\s*\(\s*colors\s*:\s*\[
  - AngularGradient\s*\(
  - Gradient\s*\(\s*colors\s*:\s*\[
- Codemod note: AST + manual grouping required to create meaningful gradient tokens.

CI enforcement examples

SwiftLint custom rules (swiftlint.yml snippet)
- literal_colors:
    name: "Literal Colors"
    regex: '(?<!theme\.|tokens\.)Color\('
    message: "Use theme tokens instead of Color(...) literals."
    severity: error
- named_colors:
    name: "Named Colors"
    regex: '(?<!theme\.|tokens\.)\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)'
    message: "Use theme palette tokens instead of named colors."
    severity: error
- literal_spacing:
    name: "Literal Spacing"
    regex: 'padding\s*\(\s*\d+'
    message: "Use theme grid tokens for spacing."
    severity: warning
- literal_radius:
    name: "Literal Radius"
    regex: 'cornerRadius\s*:\s*\d+'
    message: "Use theme shape tokens for radii."
    severity: warning

ripgrep CI checks (fail on matches)
- rg -n "(?<!theme\.|tokens\.)\bColor\(" BabciaTobiasz AppHost
- rg -n "(?<!theme\.|tokens\.)\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)\b" BabciaTobiasz AppHost
- rg -n "padding\s*\(\s*\d+|spacing\s*:\s*\d+|cornerRadius\s*:\s*\d+" BabciaTobiasz AppHost

PR quality gates
- Require at least one screenshot or visual diff attachment for UI-impacting PRs.
- Require updated audit.csv delta (or a clean audit) when touching SwiftUI views.
