replacement_rules:
Color:
- rule: Replace literal Color(...) and .blue/.red/etc with theme.palette semantic tokens.
- pattern_regex: \\bColor\\(|\\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)\\b
- ast_pattern: MemberAccessExpr(base: nil, name in literalColors) OR FunctionCallExpr(callee == Color).
- codemod_note: SwiftSyntax recommended to distinguish Color vs ShapeStyle and avoid false positives in non-UI code.

SemanticColor:
- rule: Replace system semantic colors (.secondary/.tertiary/.quaternary) with theme.palette.textSecondary/textTertiary unless explicitly allowed.
- pattern_regex: \\.(secondary|tertiary|quaternary)\\b
- ast_pattern: MemberAccessExpr(name in semanticSystemColors) scoped to foregroundStyle/background/fill/stroke.
- codemod_note: Requires AST or scoped regex to avoid enum cases unrelated to Color/ShapeStyle.

Opacity:
- rule: Replace .opacity(NUM) with theme.elevation.overlayDim or component-specific opacity tokens.
- pattern_regex: \\.opacity\\(\\s*[0-9]*\\.?[0-9]+\\s*\\)
- ast_pattern: FunctionCallExpr(callee member 'opacity' with numeric literal argument).
- codemod_note: Regex can find candidates; manual review needed for animations, disabled states, and conditional opacities.

Shadow:
- rule: Replace literal shadow parameters with theme.elevation.levelN tokens (color, radius, offsets, opacity).
- pattern_regex: \\.shadow\\(
- ast_pattern: FunctionCallExpr(callee member 'shadow').
- codemod_note: SwiftSyntax strongly recommended to capture radius/x/y/opacity arguments reliably.

Spacing:
- rule: Replace numeric layout literals with theme.grid scale tokens.
- pattern_regex: padding\\(\\s*\\d+|padding\\(\\.\\w+,\\s*\\d+|spacing:\\s*\\d+|frame\\(.*(width|height):\\s*\\d+|offset\\(.*(x|y):\\s*\\d+
- ast_pattern: FunctionCallExpr(callee in {padding, frame, offset}) with numeric literal args; labeled argument spacing: numeric literal.
- codemod_note: Regex is effective for detection; AST required for safe replacement and mapping to closest scale token.

Shape:
- rule: Replace corner radius literals with theme.shape tokens.
- pattern_regex: cornerRadius:\\s*\\d+|RoundedRectangle\\(cornerRadius:
- ast_pattern: FunctionCallExpr(callee == RoundedRectangle) with labeled arg cornerRadius numeric literal; labeled arg cornerRadius: numeric literal.
- codemod_note: Regex is sufficient for detection; replacement should be AST-aware to preserve nested shapes.

Typography:
- rule: Replace .font(.system(...)) and .font(.title/.headline/...) with theme.typography semantic styles.
- pattern_regex: \\.font\\(\\.system|\\.font\\(\\.(largeTitle|title|title2|title3|headline|subheadline|body|callout|caption|caption2|footnote)
- ast_pattern: FunctionCallExpr(callee member 'font' with argument member access or system font call).
- codemod_note: AST recommended to ensure replacements occur only on SwiftUI View modifiers.

Gradient:
- rule: Replace literal gradients with theme.backgrounds semantic gradients.
- pattern_regex: LinearGradient\\(\\s*colors:\\s*\\[|AngularGradient\\(|Gradient\\(\\s*colors:\\s*\\[
- ast_pattern: FunctionCallExpr(callee in {LinearGradient, AngularGradient, Gradient}) with literal color arrays.
- codemod_note: Requires manual verification; gradients are brand-specific and need design input.

ButtonStyle:
- rule: Replace literal color arguments in styles/foregroundStyle with theme palette tokens.
- pattern_regex: buttonStyle\\([^)]*color:\\s*(Color\\(|\\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown))|\\.foregroundStyle\\(\\s*(Color\\(|\\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown|secondary|tertiary))
- ast_pattern: FunctionCallExpr(callee member 'buttonStyle' with labeled arg color numeric/literal; FunctionCallExpr(callee member 'foregroundStyle' with literal argument).
- codemod_note: AST recommended to differentiate ShapeStyle vs Color and avoid false positives.

Other:
- rule: Replace material/opacities and other theme-affecting literals with theme.elevation/background tokens.
- pattern_regex: \\.(ultraThinMaterial|thinMaterial|regularMaterial|thickMaterial|ultraThickMaterial)\\.opacity\\(\\s*[0-9]*\\.?[0-9]+
- codemod_note: Manual review required; materials may be intentional but should route through theme when possible.

enforcement_ci_lint:
SwiftLint_custom_rules:
- name: no_literal_colors
  regex: "\\bColor\\(|\\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)\\b"
  match_kinds: [identifier, keyword]
  message: "Use theme palette tokens instead of literal colors."
  severity: error
- name: no_system_semantic_colors
  regex: "\\.(secondary|tertiary|quaternary)\\b"
  match_kinds: [identifier]
  message: "Use theme semantic text tokens instead of system semantic colors."
  severity: warning
- name: no_literal_opacity
  regex: "\\.opacity\\(\\s*[0-9]*\\.?[0-9]+\\s*\\)"
  match_kinds: [identifier]
  message: "Use theme opacity/elevation tokens instead of literal opacity."
  severity: warning
- name: no_literal_spacing
  regex: "padding\\(\\s*\\d+|spacing:\\s*\\d+|frame\\(.*(width|height):\\s*\\d+|offset\\(.*(x|y):\\s*\\d+"
  match_kinds: [identifier]
  message: "Use theme grid tokens instead of numeric layout literals."
  severity: warning
- name: no_literal_corner_radius
  regex: "cornerRadius:\\s*\\d+|RoundedRectangle\\(cornerRadius:"
  match_kinds: [identifier]
  message: "Use theme shape tokens instead of literal radii."
  severity: warning
- name: no_literal_typography
  regex: "\\.font\\(\\.system|\\.font\\(\\.(largeTitle|title|title2|title3|headline|subheadline|body|callout|caption|caption2|footnote)"
  match_kinds: [identifier]
  message: "Use theme typography tokens instead of literal font styles."
  severity: warning

ripgrep_ci_checks:
- description: fail build on newly introduced literal colors
  cmd: rg -n "\\bColor\\(|\\.(black|white|red|orange|blue|green|teal|cyan|purple|pink|indigo|mint|yellow|brown)\\b" BabciaTobiasz AppHost DreamRoomEngine BabciaScanPipeline && exit 1 || exit 0
- description: fail build on newly introduced literal layout/shape/opacity primitives
  cmd: rg -n "padding\\(\\s*\\d+|spacing:\\s*\\d+|cornerRadius:\\s*\\d+|\\.opacity\\(\\s*[0-9]" BabciaTobiasz AppHost DreamRoomEngine BabciaScanPipeline && exit 1 || exit 0
- description: fail build on literal gradients
  cmd: rg -n "LinearGradient\\(\\s*colors:\\s*\\[|Gradient\\(\\s*colors:\\s*\\[|AngularGradient\\(" BabciaTobiasz AppHost DreamRoomEngine BabciaScanPipeline && exit 1 || exit 0

pr_visual_diff_requirement:
- rule: PRs touching SwiftUI view files must include visual diffs/screenshots for impacted screens.
- implementation_options:
  - CI check: compare `git diff --name-only origin/main...HEAD` for `*.swift` under Features/Shared and require an attached artifact.
  - PR template checkbox: "I ran affected screens and attached screenshots/visual diffs."
  - optional: integrate snapshot testing (e.g., swift-snapshot-testing) for critical components.
